<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>段考單字題庫</title>
  <style>
    #counter {
        color: grey;
        font-size: 1.2em; /* 調整按鈕、結果和計數器字體大小 */
        margin-top: 10px; /* 調整按鈕、結果和計數器之間的間距 */
      }
       #counter2 {
        color: grey;
        font-size: 1.2em; /* 調整按鈕、結果和計數器字體大小 */
        margin-top: 10px; /* 調整按鈕、結果和計數器之間的間距 */
      }
    * {
        border-radius: 15px;
    }
    body {
        background-color: rgb(45, 45, 45);
        font-family: Arial, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
    }

    #question-container {
        text-align: center;
    }

    h1 {
        color: white;
        font-size: 2em;
        margin-bottom: 10px;
    }

    #user-input {
        background-color: rgb(35, 35, 35);
        color: white;
        font-size: 1.5em;
        margin-bottom: 20px;
    }

    #next-button,
    #check-button {
        background-color: rgb(35, 35, 35);
        color: white;
        font-size: 1.5em;
        margin: 0 auto;
    }

    #result {
        font-size: 1.5em;
        margin-top: 10px;
    }
      #result2 {
        font-size: 1.5em;
        margin-top: 10px;
    }
</style>
</head>
<body>
    
  <div id="question-container">
    <div id="counter2">最後更新於: 5/12 總題數: <span id="qcount">0</span></div>
    <div id="counter">當前題數: <span id="current-question">0</span> 答對題目數: <span id="correct-count">0</span> 答錯題目數: <span id="wrong-count">0</span> 正確率: <span id="accuracy">0%</span></div>
    <h1 id="chinese-word"></h1>
    <input type="text" id="user-input" placeholder="請輸入答案" onkeydown="checkOnEnter(event)">
    <br>
    <button id="check-button" onclick="checkAnswer()">檢查答案</button>
    <h1 id="result"></h1>
    <h1 id="result2"></h1>
    <button id="next-button" style="display: none;" onclick="nextQuestion()">下一題</button>
    
  </div>

  <script>
    // 直接將 JSON 資料嵌入到 JavaScript 中
    const jsonData = [
  {
    "English": "annoy",
    "Chinese": "惱怒"
  },
  {
    "English": "adopt",
    "Chinese": "採用"
  },
  {
    "English": "attitude",
    "Chinese": "態度"
  },
  {
    "English": "achieve",
    "Chinese": "達成"
  },
  {
    "English": "awful",
    "Chinese": "糟糕的"
  },
  {
    "English": "apologize",
    "Chinese": "道歉"
  },
  {
    "English": "approach",
    "Chinese": "接近"
  },
  {
    "English": "absolutely",
    "Chinese": "完全地"
  },
  {
    "English": "around the corner",
    "Chinese": "即將到來"
  },
  {
    "English": "at least",
    "Chinese": "至少"
  },
  {
    "English": "apartfrom",
    "Chinese": "除了之外"
  },
  {
    "English": "abbreviation",
    "Chinese": "縮寫"
  },
  {
    "English": "blow up",
    "Chinese": "炸毀"
  },
  {
    "English": "bully",
    "Chinese": "霸凌者"
  },
  {
    "English": "breakup",
    "Chinese": "分開"
  },
  {
    "English": "blank",
    "Chinese": "空白的"
  },
  {
    "English": "continue",
    "Chinese": "繼續"
  },
  {
    "English": "control",
    "Chinese": "控制"
  },
  {
    "English": "call for",
    "Chinese": "呼籲"
  },
  {
    "English": "career",
    "Chinese": "事業"
  },
  {
    "English": "consistently",
    "Chinese": "持續地"
  },
  {
    "English": "convey",
    "Chinese": "傳達"
  },
  {
    "English": "cruel",
    "Chinese": "殘忍的"
  },
  {
    "English": "ceremony",
    "Chinese": "典禮"
  },
  {
    "English": "column",
    "Chinese": "(頁面上的)欄"
  },
  {
    "English": "disadvantage",
    "Chinese": "劣勢"
  },
  {
    "English": "dare",
    "Chinese": "敢"
  },
  {
    "English": "defend",
    "Chinese": "保護"
  },
  {
    "English": "educate",
    "Chinese": "教育"
  },
  {
    "English": "equal",
    "Chinese": "相等的"
  },
  {
    "English": "ensure",
    "Chinese": "確保"
  },
  {
    "English": "establish",
    "Chinese": "建立"
  },
  {
    "English": "extreme",
    "Chinese": "極端的"
  },
  {
    "English": "entertain",
    "Chinese": "娛樂"
  },
  {
    "English": "female",
    "Chinese": "女性"
  },
  {
    "English": "forbid",
    "Chinese": "禁止"
  },
  {
    "English": "fulfill",
    "Chinese": "實現"
  },
  {
    "English": "failure",
    "Chinese": "失敗"
  },
  {
    "English": "for instance",
    "Chinese": "例如"
  },
  {
    "English": "fit in",
    "Chinese": "融入"
  },
  {
    "English": "fill in",
    "Chinese": "填寫"
  },
  {
    "English": "frequent",
    "Chinese": "頻繁的"
  },
  {
    "English": "genuinely",
    "Chinese": "真誠地"
  },
  {
    "English": "gradually",
    "Chinese": "逐漸地"
  },
  {
    "English": "guide",
    "Chinese": "指引的事物"
  },
  {
    "English": "honor",
    "Chinese": "榮譽"
  },
  {
    "English": "hardship",
    "Chinese": "艱難"
  },
  {
    "English": "imaginative",
    "Chinese": "有想像力的"
  },
  {
    "English": "in addition to",
    "Chinese": "除之外"
  },
  {
    "English": "in other words",
    "Chinese": "換句話說"
  },
  {
    "English": "in turn",
    "Chinese": "繼而 依序"
  },
  {
    "English": "incident",
    "Chinese": "事件"
  },
  {
    "English": "information",
    "Chinese": "資訊"
  },
  {
    "English": "involve",
    "Chinese": "包含"
  },
  {
    "English": "meet with",
    "Chinese": "遭遇到"
  },
  {
    "English": "make fun of",
    "Chinese": "嘲笑"
  },
  {
    "English": "make peace",
    "Chinese": "和好"
  },
  {
    "English": "make use of",
    "Chinese": "利用"
  },
  {
    "English": "overcome",
    "Chinese": "克服"
  },
  {
    "English": "obstacle",
    "Chinese": "障礙"
  },
  {
    "English": "overhear",
    "Chinese": "無意中聽到"
  },
  {
    "English": "on a basis",
    "Chinese": "每...(日 周 年等)"
  },
  {
    "English": "principal",
    "Chinese": "校長"
  },
  {
    "English": "persuade",
    "Chinese": "說服"
  },
  {
    "English": "policy",
    "Chinese": "政策"
  },
  {
    "English": "poverty",
    "Chinese": "貧窮"
  },
  {
    "English": "passion",
    "Chinese": "熱愛 熱情"
  },
  {
    "English": "parade",
    "Chinese": "遊行"
  },
  {
    "English": "pursue",
    "Chinese": "追求"
  },
  {
    "English": "purposely",
    "Chinese": "故意地"
  },
  {
    "English": "pretend",
    "Chinese": "假裝"
  },
  {
    "English": "professor",
    "Chinese": "教授"
  },
  {
    "English": "process",
    "Chinese": "處理(資訊 資料)"
  },
  {
    "English": "region",
    "Chinese": "地區"
  },
  {
    "English": "recover",
    "Chinese": "康復"
  },
  {
    "English": "receive",
    "Chinese": "收到"
  },
  {
    "English": "rescue",
    "Chinese": "解救"
  },
  {
    "English": "request",
    "Chinese": "要求"
  },
  {
    "English": "rude",
    "Chinese": "無理的"
  },
  {
    "English": "require",
    "Chinese": "需要"
  },
  {
    "English": "review",
    "Chinese": "複習"
  },
  {
    "English": "reserve",
    "Chinese": "保留"
  },
  {
    "English": "recite",
    "Chinese": "背誦"
  },
  {
    "English": "surgery",
    "Chinese": "外科手術"
  },
  {
    "English": "sign",
    "Chinese": "簽名"
  },
  {
    "English": "speak out",
    "Chinese": "發聲"
  },
  {
    "English": "spring into action",
    "Chinese": "立即行動"
  },
  {
    "English": "stare",
    "Chinese": "盯著看"
  },
  {
    "English": "scary",
    "Chinese": "可怕的"
  },
  {
    "English": "sick to ones stomach",
    "Chinese": "非常難過"
  },
  {
    "English": "system",
    "Chinese": "方法 制度"
  },
  {
    "English": "summary",
    "Chinese": "摘要"
  },
  {
    "English": "threaten",
    "Chinese": "威脅"
  },
  {
    "English": "take notice",
    "Chinese": "注意"
  },
  {
    "English": "take away",
    "Chinese": "拿走"
  },
  {
    "English": "take seriously",
    "Chinese": "認真看待"
  },
  {
    "English": "tease",
    "Chinese": "嘲弄"
  },
  {
    "English": "technique",
    "Chinese": "技術"
  },
  {
    "English": "weapon",
    "Chinese": "手段 武器"
  },
  {
    "English": "weave",
    "Chinese": "編織"
  },
  {
    "English": "whisper",
    "Chinese": "耳語"
  }
];
let currentQuestion = 0;
let correctCount = 0;
let wrongCount = 0;
let usedIndices = [];
let currentIndex = getRandomIndex();
document.getElementById('qcount').textContent = jsonData.length;
function getRandomIndex() {

  let randomIndex;
  do {
    randomIndex = Math.floor(Math.random() * jsonData.length);
  } while (usedIndices.includes(randomIndex));


  return randomIndex;
}

// Rest of your code remains unchanged


   function getHint() {
        let hint = "";
        let engstring = jsonData[currentIndex].English.split(" ");
        for (let i = 0; i < engstring.length; i++) {
            if (engstring[i].length <= 1) {
            } else if (engstring[i].length <= 3) {
                hint = hint + "_ "
            } else {
                const word = engstring[i];
                const firstLetter = word[0];
                const lastLetter = word[word.length - 1];
                
                hint += `${firstLetter}_${lastLetter} `;
            }


          }

        return hint;
    }

   function loadQuestion() {
    currentQuestion++;
    document.getElementById('current-question').textContent = currentQuestion;
     const chineseWordElement = document.getElementById('chinese-word');
     chineseWordElement.textContent = getHint() + " " + jsonData[currentIndex].Chinese;
   }

   function checkAnswer() {
    const checkElement = document.getElementById('check-button');
    checkElement.style.display = 'none';
     const userInput = document.getElementById('user-input').value.toLowerCase();
     const correctAnswer = jsonData[currentIndex].English.toLowerCase();
     const resultElement = document.getElementById('result');
    const resultsElement = document.getElementById('result2');
     const nextButton = document.getElementById('next-button');

     if (userInput.trim() == correctAnswer.trim()) {
       resultElement.textContent = '正確！';
       usedIndices.push(currentIndex);
       nextButton.style.display = 'block'; // 顯示下一題按鈕
       correctCount++;
        document.getElementById('correct-count').textContent = correctCount;
     } else {
       resultElement.textContent = '錯誤，正確答案是 : ' + correctAnswer;
       
       nextButton.style.display = 'block'; // 顯示下一題按鈕
       wrongCount++;
       document.getElementById('wrong-count').textContent = wrongCount;
     }
        if (usedIndices.length === jsonData.length) {
          // Reset usedIndices if all indices have been used
          usedIndices = [];

          resultsElement.textContent = '已完成作答!';
        }

   }

   function checkOnEnter(event) {
    if (event.key === 'Enter') {
        const nextButton = document.getElementById('next-button');
      if (nextButton.style.display == 'block') {

        nextQuestion();
      } else {
        checkAnswer();
      }
      
    }
  }

   function nextQuestion() {
    const nextButton = document.getElementById('next-button');
    const resultElement = document.getElementById('result');
    const checkElement = document.getElementById('check-button');
    checkElement.style.display = 'block';
    document.getElementById('user-input').value = '';
    resultElement.textContent = '';
    currentIndex = getRandomIndex();
    nextButton.style.display = 'none'; 
    loadQuestion();
    document.getElementById('accuracy').textContent = (correctCount / (currentQuestion-1) * 100).toFixed(1) + "%"

  }
   loadQuestion();
  </script>
</body>
</html>
